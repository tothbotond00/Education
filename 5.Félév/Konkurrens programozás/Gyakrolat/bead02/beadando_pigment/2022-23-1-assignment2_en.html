
<!-- saved from url=(0106)file:///D:/source/repos/konkurens/BSc/assignments/2022-23-1-assignment2-PigMent/2022-23-1-assignment2.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><hr class="solid" style="border-top: 5px solid grey;">
<h1 style="text-align: center;" _msthash="135720" _msttexthash="183131">Information</h1>
<hr class="solid" style="border-top: 5px solid grey;">

<h4 _msthash="136422" _msttexthash="262873">Auxiliary files</h4>
<p style="text-align: justify; color:red" _msthash="122551" _msttexthash="1051089">skeleton + example output placeholder</p>

<hr class="solid" style="border-top: 1px solid grey;">
<h4 _msthash="136942" _msttexthash="387738">Tasks and evaluation</h4>
<p style="text-align: justify;" _msthash="136240" _msttexthash="41713568">The solution to be submitted consists of three sequential tasks, starting with the basic task, and then, when you are done with it, you can supplement your program with the second, additional task. You do not need to solve the third, diligent task for the maximum 15 points that can be given.</p>
<p style="text-align: justify;" _msthash="136370" _msttexthash="47516924">You definitely need to solve the basic task. The basic task has subtasks that you can omit (or dumb down) and your program will still work. For a partially solved basic task, subpoints can be obtained. The condition for a successful submission is that your alaprogram is working, i.e. it can be compiled and run.</p>
<p style="text-align: justify;" _msthash="136500" _msttexthash="20083518">By missolving another task, you can spoil your existing, partially finished, but workable program. If you already have a workable program, you may want to create additional subtasks in a new file.</p>
<p style="text-align: justify;" _msthash="136630" _msttexthash="37533236">The reason the text of the assignment is so long is because it's readable. The program itself, which you need to prepare, is especially short. The entire task sequence can be solved with a program consisting of a single file, without comments and empty lines around 100 lines.</p>

<hr class="solid" style="border-top: 1px solid grey;">
<h4 _msthash="151658" _msttexthash="264004">Administration</h4>
<p style="text-align: justify;" _msthash="137150" _msttexthash="79241942">When submitting, you can submit up to 1-1 file for both the basic task and the additional task. Of course, the additional task also includes the basic task, but when evaluating, you will receive points for the two tasks separately. So if, for example, you have 5 backups for the basic task and 3 for the additional task, you choose the best managed basic task and the best managed additional task solution.</p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137280" _msttexthash="35996051">Zip in your solutions. The file name should be your neptune code. Within the file, in the Task1 and Task2 folders, place your basic task and additional task solution. A solution must consist of a single file. In case of diligence, you should do the same, have a Task3 folder!</font><code>PigMent.java</code></p>

<hr class="solid" style="border-top: 1px solid grey;">
<h4 _msthash="151073" _msttexthash="43485">Aids</h4>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="136617" _msttexthash="137579689">To make it easier to track the task, the names of classes, methods, and variables are specified in each task description. Start with a starter file that contains only these names, so you don't have time to unravel and copy the variable names one by one from the task. At the beginning of the starting file, you can also see the individual values, which must be written out on the screen at each point in the program. This similarly serves the purpose of not having to stop your work while coding and start searching the text of the task. </font><code>PigMent.java</code><code>String</code></p>
<p _msthash="136747" _msttexthash="5316350">All-caps names denote constants. They can be found with an already set value in the starting file.</p>
<p _msthash="136877" _msttexthash="15353507">In the task description, "mass", "size" and "weight" are synonymous. In this fictional world, the gravitational field is uniform. We do not deal with density differences.</p>

<br>

<hr class="solid" style="border-top: 5px solid green;">
<h1 style="text-align: center;" _msthash="151905" _msttexthash="185900">Basic Task (9p)</h1>
<h3 style="text-align: center;" _msthash="150956" _msttexthash="2528591">Executor, Runnable, synchronized, AtomicInteger, wait-notify</h3>
<h4 style="text-align: center; color: gray"><i _msthash="151203" _msttexthash="489229">Difficulty: I can do this!</i></h4>
<hr class="solid" style="border-top: 5px solid green;">

<h4 _msthash="151632" _msttexthash="135109">Story Time</h4>
<p style="text-align: justify;" _msthash="137124" _msttexthash="193603748">On a planet <i _istranslated="1">called PigMent,</i> wildlife hid underground from the hot sun. The exception to this is a strange species of pig adapted to the cruel environment. As a result of a strange mutation, a purple pigment appeared in their skin, with the help of which most of the harmful ultraviolet radiation is reflected, and from the absorbed light they develop energy by photosynthesis. Pigs are gender-neutral, so if they reach a certain size, they multiply by division, similar to bacteria. Each pig has its own will and decision-making ability, so you have to treat each pig separately, in parallel with the other pigs, during the program.</p>

<hr class="solid" style="border-top: 1px solid green;">
<h4 _msthash="152204" _msttexthash="268502">pigSleep - 1 point</h4>
<p style="text-align: justify;" _msthash="137644" _msttexthash="3293199">Not everything happens immediately. The big things have to wait.. or sleep..</p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="136591" _msttexthash="20102745">This is no different here, there is also sometimes idle time in the society of pigs. To do this, write the method that blocks the calling thread for a period of between milliseconds and milliseconds.</font><code>pigSleep()</code><code>TICK_MIN</code><code>TICK_MAX</code></p>

<hr class="solid" style="border-top: 1px solid green;">
<h4 _msthash="151619" _msttexthash="266903">PhotoPig - 1 point</h4>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137111" _msttexthash="24435541">The pig breed is described by a class with a name. To be able to track each pig, each specimen has a unique identifier (). Furthermore, at birth, their mass (), which is also stored in the class, can be parametrically adjusted.</font><code>PhotoPig</code><code>id</code><code>mass</code></p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137241" _msttexthash="22535721">Make sure that the mass in the constructor is the value obtained as the parameter, and that it is solved by a globally available (you can also call it -) that each pig specimen receives the number as the identifier.</font><code>AtomicInteger</code><code>id</code></p>

<hr class="solid" style="border-top: 1px solid green;">
<h4 _msthash="152334" _msttexthash="215748">pigSay - 1 point</h4>
<p style="text-align: justify;" _msthash="137761" _msttexthash="14861522"> Although piglets tolerate the vagaries of the weather well, their brains are slightly cooked in the great heat. Because of this, they tend to regularly shout nonsense.</p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="136708" _msttexthash="19523257">By writing the method, give voice to the volleys. The method writes out to the console, and also writes out who was speaking before it. To do this, put both the ID and the crowd in front of the message.</font><code>pigSay(String msg)</code><code>msg</code></p>
<p style="text-align: justify;" _msthash="136838" _msttexthash="3510884">Only one pig can talk at a time! Otherwise, it would just be a noise disturbance.</p>

<hr class="solid" style="border-top: 1px solid green;">
<h4 _msthash="151892" _msttexthash="607490">eatLight() and run() - 4 points</h4>
<p style="text-align: justify;" _msthash="137358" _msttexthash="306927972">Pigs constantly lose mass during their metabolism. Catabolic (decomposing) metabolic processes are compensated by anabolic (building) metabolic processes. This, in turn, requires building material. Because of this, people are used to eating. Here, on the other hand, there are photosynthesizing pigs, so it's a little different for them. Instead of eating, they go to bed for the day to sleep. Once they've sucked themselves in light, they'll head home. On the way home, the building processes take place in their body, which is why they become more muscular, fatter, and therefore larger than before. If they reach a certain critical mass, they will split in two by division. The original pig is also preserved, but half of its mass awakens to consciousness and detaches from the mother body.</p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137488" _msttexthash="12019332">The class should be an implementation so that individual pigs can be thrown into an object (). Ensure that each pig can live in tandem with the other pigs!</font><code>PhotoPig</code><code>Runnable</code><code>ExecutorService</code><code>pigPool</code></p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137618" _msttexthash="146512392">The beginning of the life of pigs should begin with the cry and end with a sigh. In between, they lie out basking over and over again. Put sunbathing and its consequence (division) in the method. Its return value indicates whether the volley has reached its doom while sunbathing. The method should return with a value if the pig is still alive. Keep the method called over and over again until a value is received. In the basic task, animals are not yet able to perish, therefore, an endless cycle is formed here. This is quite normal, this is not a mistake!</font><code>"Beware world, for I'm here now!"</code><code>"I have endured unspeakable horrors. Farewell, world!"</code><code>eatLight()</code><code>true</code><code>eatLight()</code><code>false</code></p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137748" _msttexthash="421709054">The method also handles anabolic (bulking) and catabolic (weight reduction) processes. Once the pig has laid out for the day, we can begin to count the changes. The mass obtained from sunbathing is dictated by the capacity of the internal organs, therefore it is independent of the mass of the pig. Get extra weight in fixed value. The lost mass already depends on the weight of the pig, lose weight in value. Note that the higher the weight of the pig, the worse the ratio of the weight received and lost. If this ratio is less than 50%, then the pig should be divided in two! To help, here's the formula: , if this is true, then the division should take place at the end of the method. The original pig is preserved with half the mass. With the other half of the crowd, create a new pig, which with its help will bring itself to life. If we have reached the number of births indicated by the value, then the newborn baby should not accidentally come to life!</font><code>eatLight()</code><code>pigSleep()</code><code>FEED</code><code>mass / BMR</code><code>mass / BMR &gt; FEED / 2</code><code>eatLight()</code><code>ExecutorService pigPool</code><code>MAX_POP</code></p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137878" _msttexthash="4377360">After eating light, the pigs rejoice in the , and when they divide, they shout stupidity.</font><code>"Holy crap, I just ate light!"</code><code>"This vessel can no longer hold the both of us!"</code></p>

<hr class="solid" style="border-top: 1px solid green;">
<h4 _msthash="151736" _msttexthash="227838">main() - 2 points</h4>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137215" _msttexthash="6581744">The simulation should initially launch a number of pigs. The mass of each of them should initially be of value.</font><code>INIT_POP</code><code>INIT_MASS</code></p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137345" _msttexthash="93920463">If the global pig counter has reached the value, the newly born pig will give a signal to complete the simulation. In theory, the simulation can run indefinitely, but in practice we would like to interrupt it after a certain number of pigs births. Since we interrupt the simulation rather than wait for it to finish, there is no need to bother with a "nice" shutdown. It's perfectly okay to use it to instantly terminal all running threads.</font><code>MAX_POP</code><code>pigPool.shutdownNow()</code></p>

<hr class="solid" style="border-top: 5px solid orange;">
<h1 style="text-align: center;" _msthash="152139" _msttexthash="331994">Additional task (6p)</h1>
<h3 style="text-align: center;" _msthash="152490" _msttexthash="1205438">BlockingQueue, ReentrantLock, Condition</h3>
<h4 style="text-align: center;; color: gray"><i _msthash="152737" _msttexthash="1717729">Difficulty: I mean.. I like a challange, right? Right?!</i></h4>
<hr class="solid" style="border-top: 5px solid orange;">

<h4 _msthash="151866" _msttexthash="135109">Story Time</h4>
<p style="text-align: justify;" _msthash="137332" _msttexthash="32409897">The pigs are so mad at the gamma rays caused by the many solar flares that they no longer despise cannibalism. This, they say, is just a more effective, faster form of nutrition. Pigs now come out of their hiding places not only to sunbathe, but also to hunt.</p>
<p style="text-align: justify;" _msthash="137462" _msttexthash="73105760">For the first time, they stroll around the busier places looking for prey. If they find a pig that is no bigger than them, they look it up as food. However, while looking, it may happen that another pig looks at him as a snack. Once you have the target the pig is hiding, at this point he is no longer seen by the other hungry pigs. If he hasn't been eaten before, he won't be caught during this hunt.</p>
<p style="text-align: justify;" _msthash="137592" _msttexthash="37495302">If he did not find prey, or while he was hiding someone else has already dropped his prey, or perhaps the prey has hung, then the hunt is unsuccessful. Otherwise, the hunt is successful and the pig will be enriched with half the weight of the prey. The life of the killed pig ends.</p>
<p style="text-align: justify;"></p><font _mstmutation="1" _msthash="61815" _msttexthash="88564190">The hunt is tiring regardless of success, so before leaving home, the pigs even go to bed for the day to rest. At this time, they become visible again to other hunters. In return, however, they also receive the extra mass after photosynthesis. If by the time he wakes up he hasn't eaten it, he won't be caught while sunbathing. On the way home, the weight loss and division due to metabolism takes place similarly to the basic task.</font><p></p>

<hr class="solid" style="border-top: 1px solid orange;">
<h4 _msthash="151710" _msttexthash="1356901">openArea and theTerribleThingToDO() - 4 points</h4>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137189" _msttexthash="117799474">Use a () to allow pigs to register when they are visible and when they are not visible to hunters. Such an object acts similarly to any . Its only interesting feature is that when instantiating, you can specify a sort in addition to the size. If you check out an item, it will return not the oldest object that was inserted, but the smallest one. For help with instantiation, see . The second argument is a lambda expression, which says that two objects can be sorted by the difference in their mass.</font><code>PriorityBlockingQueue</code><code>openArea</code><code>BlockingQueue</code><code>new PriorityBlockingQueue&lt;&gt;(MAX_POP, (a,b) -&gt; a.mass - b.mass);</code><code>PhotoPig</code></p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137319" _msttexthash="85802912">During a hunt, after looking at a prey, it takes time for them to hide well to catch it. Pigs should also be available during hunting and sunbathing, i.e. add themselves to the line beforehand, and then take themselves out with the instruction. In the case of hunting, they look out for prey with its help even before waiting. This means that while they are hiding (which is time), the prey has some chance of hanging around.</font><code>pigSleep()</code><code>pigSleep()</code><code>openArea</code><code>openArea.remove(this)</code><code>peek()</code><code>pigSleep()</code></p>
<p style="text-align: justify;" _msthash="137449" _msttexthash="65767975">If they cannot take them out themselves, then someone has already taken them out, that is, eaten them. Otherwise, everything is fine and they can try to take out their own prey. If they don't know, it's either because they were the smallest and chose themselves as prey, or they've escaped (gone home) in the meantime, or someone else has eaten the pig they want to kill.</p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137579" _msttexthash="45534268">The mechanism of hunting should be placed in his trunk. Similar to the method, return a value if he survived, i.e. he was not eaten by another hunter while hunting, otherwise it should be the return value. It now calls the hunting and photosynthesis methods continuously until one gives a false value.</font><code>aTerribleThingToDO()</code><code>eatLight()</code><code>true</code><code>false</code><code>run()</code></p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137709" _msttexthash="3465501">In case of a successful hunt, the pig should confess by conveying the message.</font><code>"Bless me, Father, for I have sinned."</code></p>

<hr class="solid" style="border-top: 1px solid orange;">
<h4 _msthash="152854" _msttexthash="1185041">Improved parallelization model - 2 points</h4>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="138229" _msttexthash="136347796">Note that by putting on and unregistering, we create a critical phase, because within this there is a way for pigs to see each other and influence each other's condition. However, no writing operations are performed at these stages, since they are just looking around, sleeping. When hunting, the killing takes place later, in hiding. Similarly, the result of photosynthesis occurs on the way home. For this reason, if you call the methods in the correct order, there is no need for huge blocks that implement mutual exclusion.</font><code>openArea</code></p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137176" _msttexthash="14484483">If all the ropes are broken and you can't implement the feature without a lock, use explicit locks using the class. Use the associated signalling system if necessary.</font><code>ReentrantLock</code><code>Condition</code></p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137306" _msttexthash="14948934">Help: for speech, use the lock with the name , for birth. For the latter, use a condition with a name. Use this to indicate the end of the simulation after a proper birth rate!</font><code>gimmeTheMike</code><code>labourWard</code><code>birthControl</code></p>
<p style="text-align: justify;"><font _mstmutation="1" _msthash="137436" _msttexthash="56399135">In the event of a shutdown, do not crash your program or throw an exception. Also, don't use your own flag variable, it's unnecessary. Instead, the interrupt flag he tipped over to stop the piglets still alive. That's when they stop doing whatever they do and be proud of themselves. This is what they communicate to the world with the cry.</font><code>pigPool.shutDownNow()</code><code>"Look on my works, ye Mighty, and despair!"</code></p>

<hr class="solid" style="border-top: 5px solid red;">
<h1 style="text-align: center;" _msthash="152243" _msttexthash="312091">Diligence task (+3p)</h1>
<h3 style="text-align: center;" _msthash="152594" _msttexthash="224510">CyclicBarrier</h3>
<h4 style="text-align: center;; color: gray"><i _msthash="152841" _msttexthash="504608">Difficulty: I WANT MY MOMMY!!!</i></h4>
<hr class="solid" style="border-top: 5px solid red;">

<p><i _msthash="151138" _msttexthash="67912">Soon...</i></p></body></html>